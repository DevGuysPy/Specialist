{% extends "Base.html" %}

{% block css %}
    <link href="{{ url_for('static', filename='css/order_service_modal.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='ion.rangeSlider-2.1.2/ion.rangeSlider-2.1.2/css/ion.rangeSlider.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='ion.rangeSlider-2.1.2/ion.rangeSlider-2.1.2/css/normalize.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='ion.rangeSlider-2.1.2/ion.rangeSlider-2.1.2/css/ion.rangeSlider.skinFlat.css') }}" rel="stylesheet">
{% endblock %}

{% block body %}
    <p class="flow-text search-title center">
        All specialists who offer <strong>{{ current_service.title|capitalize }}</strong>
    </p>
    <p class="flow-text center" id="specialists-count"></p>
    <div class="row">
        <div class="col m2 order-by-column">
            <p class="flow-text center order-by-text">Filters</p>
            <div id="chips-container"></div>
            <div class="card">
                <ul class="collapsible" data-collapsible="expandable">
                    <li id="order-by-location-accordion-el">
                        <div class="collapsible-header"><i class="material-icons">place</i>Location</div>
                        <div class="collapsible-body order-by">
                            <div class="input-field">
                                <input type="text" id="order_by_location_city_autocomplete">
                            </div>
                            <div id="order_by_location_city_details">
                                <input type="hidden" name='country'>
                                <input type="hidden" name='locality'>
                            </div>
                            <div id="order_by_location_extended_details">
                                <input type="hidden" name='lat'>
                                <input type="hidden" name='lng'>
                            </div>
                        </div>
                    </li>
                    <li id="order-by-experience-accordion-el">
                      <div class="collapsible-header"><i class="material-icons">trending_up</i>Experience</div>
                      <div class="collapsible-body">
                          <div class="order-by-slider">
                              <input type="text" id="order_by_experience_slider" value="" />
                          </div>
                      </div>
                    </li>
                    <li id="order-by-success-accordion-el">
                      <div class="collapsible-header"><i class="material-icons">thumb_up</i>Success jobs</div>
                      <div class="collapsible-body">
                          <div class="order-by-slider">
                              <input type="text" id="order_by_success_slider" value="" />
                          </div>
                      </div>
                    </li>
                    <li id="order-by-sorting-accordion-el">
                        <div class="collapsible-header"><i class="material-icons">sort</i>Sorting</div>
                        <div class="collapsible-body" style="padding: 10px">
                            <p>
                                <input name="sorting-radio" class="common-sorting" type="radio" id="sorting-radio-1" />
                                <label for="sorting-radio-1">First the most experienced</label>
                            </p>
                            <p>
                                <input name="sorting-radio" class="common-sorting" type="radio" id="sorting-radio-2" />
                                <label for="sorting-radio-2">First the least experienced</label>
                            </p>
                            <p>
                                <input name="sorting-radio" class="common-sorting" type="radio" id="sorting-radio-3" />
                                <label for="sorting-radio-3">First the most successful</label>
                            </p>
                            <p>
                                <input name="sorting-radio" class="common-sorting" type="radio" id="sorting-radio-4" />
                                <label for="sorting-radio-4">First the least successful</label>
                            </p>
                            <p>
                                <input name="sorting-radio" type="radio" id="sorting-radio-5"/>
                                <label for="sorting-radio-5">First the nearest</label>
                            </p>
                            <p>
                                <input name="sorting-radio" type="radio" id="sorting-radio-6"/>
                                <label for="sorting-radio-6">First the farthest</label>
                            </p>
                        </div>
                    </li>
                    <li id="order-by-orders-accordion-el">
                      <div class="collapsible-header"><i class="material-icons">shopping_cart</i>Orders count</div>
                      <div class="collapsible-body"><p>Lorem ipsum dolor sit amet.</p></div>
                    </li>
                    <li id="order-by-price-accordion-el">
                      <div class="collapsible-header"><i class="material-icons">loyalty</i>Average price</div>
                      <div class="collapsible-body"><p>Lorem ipsum dolor sit amet.</p></div>
                    </li>
                </ul>
            </div>
            <div class="center">
                <a id="order_by_submit" class="waves-effect waves-light btn blue-grey darken-3">Submit</a>
            </div>
        </div>
        <div class="col m10">
            <div id="specialists-container"></div>
            <div class="row">
                <p class="flow-text center">Similar services</p>
                {% for service in similar_services %}
                    <div class="col m4">
                        <div class="card hoverable cursor"
                             onclick="location.href='{{ url_for('search_specialist', service_id=service.id) }}'">
                            <div class="card-content">
                                <div class="card-title center">
                                    {{ service.title|capitalize }}
                                </div>
                                <p>{{ service.specialists.all()|length }} specialists offer this service.</p>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>
    {% include "OrderService.html" %}
    {% with modal_header='First you must add location for this sorting' %}
        {% include "MapModal.html" %}
    {% endwith %}
{% endblock %}

{% block script %}
    <script src="{{ url_for('static', filename='js/jquery.geocomplete.js') }}"></script>
    <script src="{{ url_for('static', filename='ion.rangeSlider-2.1.2/ion.rangeSlider-2.1.2/js/ion-rangeSlider/ion.rangeSlider.js') }}"></script>
    <script src="{{ url_for('static', filename='js/search.js') }}"></script>
    <script>
        initSearchPage(
                {{ current_service.id }},
                {{ experience_types|safe }},
                {{ request.args|tojson|safe }});
    </script>
    <script src="{{ url_for('static', filename='js/orderService.js') }}"></script>
    <script type="text/javascript">
        initOrderServiceModal({{ current_service.id }});
    </script>

{% endblock %}